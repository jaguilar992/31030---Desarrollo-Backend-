(()=>{var e={505:(e,t,o)=>{"use strict";const s=o(860),n=o(582),r=s(),{PORT:i=8080}=o(758),d=o(816),a=o(453),c=o(77),u=o(336);r.engine("hbs",u.engine),r.set("view engine","hbs"),r.set("views","./src/views/"),r.use(s.urlencoded({extended:!0})),r.use(s.json()),r.use(n()),r.use("/pokemon",d),r.use("/trainer",a),r.listen(i,(()=>{c.info(`ðŸŒ©ï¸ Escuchando peticiones en puerto: ${i}`)})).on("error",(e=>{c.err(e)})),e.exports=r},758:(e,t,o)=>{o(142).config(),e.exports={PORT:"3000",JWT_KEY:"JAJA"}},21:(e,t,o)=>{const s=o(662);e.exports={getAllPokemons:function(e,t){const o=s.readAll();t.json(o)},addNewPokemon:function(e,t){const{id:o,nombre:n,tipo:r="Normal",HP:i=10}=e.body;if(!o||!n)return void t.status(400).json({mensaje:"Nombre y numero son requeridos"});const d=s.save({id:o,nombre:n,tipo:r,HP:i});t.json(d)},getPokemonById:function(e,t){const o=parseInt(e.params.id)||0;if(!o)return void t.status(400).json({mensaje:"Numero es requerido"});const n=s.getById(o);n||t.status(404).json({mensaje:"Pokemon no encontrado"}),t.json(n)},updatePokemonById:function(e,t){const o=parseInt(e.params.id)||0,{nombre:n,tipo:r="Normal",HP:i=10}=e.body;if(!o||!n)return void t.status(400).json({mensaje:"Nombre y numero son requeridos"});const d=s.updatePokemonById(o,{nombre:n,tipo:r,HP:i,id:o});t.json(d)},deletePokemonById:function(e,t){const o=parseInt(e.params.id)||0;if(!o)return void t.status(400).json({mensaje:"Numero es requerido"});const n=s.deleteById(o);t.json(n)},showPokemonView:function(e,t){const o=s.readAll();t.render("pokemon",{pokemons:o})}}},330:(e,t,o)=>{const s=o(985);e.exports={addTrainer:function(e,t){const{nombre:o,edad:n,ciudad:r}=e.body;if(!o||!n||!r)return void t.status(400).json({mensaje:"name, edad, ciudad requeridos"});const i=s.save({nombre:o,edad:n,ciudad:r});t.json(i)},getTrainerInfo:function(e,t){const o=parseInt(e.params.id);if(!o)return void t.status(400).json({mensaje:"id es requerido"});const n=s.getInfo(o);t.json(n)},addPokemon:function(e,t){const o=parseInt(e.params.id),{pokemonId:n}=e.body;if(!o||!n)return void t.status(400).json({mensaje:"Id del trainer y pokemon es requerido"});const r=s.addPokemon(o,n);t.json(r)}}},560:(e,t,o)=>{const s=o(147),n="utf-8";e.exports=class{constructor(e){this.filePath=e,this.createFileIfNotExists();const t=s.readFileSync(this.filePath,n);this.contenedor=JSON.parse(t)}createFileIfNotExists(){s.existsSync(this.filePath)||s.writeFileSync(this.filePath,"[]")}_saveAll(e){const t=JSON.stringify(e,null,2);s.writeFileSync(this.filePath,t,n)}save(e){if(!e.id){const t=this.contenedor.reduce(((e,t)=>t.id>e?t.id:e),0)+1;e.id=t}return this.contenedor.push(e),this._saveAll(this.contenedor),e.id}getById(e){return this.contenedor.find((t=>t.id===e))}getAll(){return this.contenedor}deleteById(e){const t=this.contenedor.filter((t=>t.id!==e));this.contenedor=t,this._saveAll(t)}deleteAll(){this.contenedor=[],this._saveAll([])}updateById(e,t){const o=this.contenedor.findIndex((t=>t.id===e));return this.contenedor[o]=t,this._saveAll(this.contenedor),this.contenedor[o]}}},77:(e,t,o)=>{const s=o(545)();e.exports=s},552:(e,t,o)=>{const s=o(344),{JWT_KEY:n=""}=o(758);e.exports={isAuth:function(e,t,o){const r=e.headers;if(!r.authorization)return void t.status(401).json({mensaje:"Token requerido"});const i=r.authorization.split(" ")[1];try{s.verify(i,n)}catch(e){return void t.status(400).json({mensaje:"Token invalido"})}o()}}},816:(e,t,o)=>{const s=o(860).Router(),{getAllPokemons:n,addNewPokemon:r,getPokemonById:i,updatePokemonById:d,deletePokemonById:a,showPokemonView:c}=o(21),{isAuth:u}=o(552);s.get("/",n),s.post("/",r),s.put("/:id",d),s.delete("/:id",a),s.get("/:id",i),s.get("/view/all",c),e.exports=s},453:(e,t,o)=>{const s=o(860).Router(),{addTrainer:n,getTrainerInfo:r,addPokemon:i}=o(330);s.post("/",n),s.get("/:id",r),s.post("/:id/addPokemon",i),e.exports=s},662:(e,t,o)=>{const s=new(o(560))("src/database/pokemon.json");e.exports=class{static save(e){var t;const o=`https://raw.githubusercontent.com/fanzeyi/pokemon.json/master/images/${(t=e.id)<10?`00${t}`:t<100?`0${t}`:t<1e3?t:""}.png`;return e.imagen=o,s.save(e),e}static readAll(){return s.getAll()}static getById(e){return s.getById(e)}static updateById(e,t){return s.updateById(e,t)}static deleteById(e){return s.deleteById(e)}}},985:(e,t,o)=>{const s=o(560),n=new s("src/database/trainer.json"),r=new s("src/database/pokemon.json");e.exports=class{static save(e){return n.save(e)}static getInfo(e){const t=n.getById(e),o=t.pokemon.map((e=>r.getById(e)));return t.pokemon=o,t}static addPokemon(e,t){const o=n.getById(e);return o.pokemon?o.pokemon.push(t):o.pokemon=[t],n.updateById(e,o)}}},336:(e,t,o)=>{const s=o(644).create({extname:".hbs",defaultLayout:"index.hbs",layoutsDir:__dirname+"/../",partialsDir:__dirname+"/../partials/"});e.exports=s},582:e=>{"use strict";e.exports=require("cors")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},644:e=>{"use strict";e.exports=require("express-handlebars")},344:e=>{"use strict";e.exports=require("jsonwebtoken")},545:e=>{"use strict";e.exports=require("pino")},147:e=>{"use strict";e.exports=require("fs")}},t={};!function o(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,o),r.exports}(505)})();